DROP DATABASE bio_db;

CREATE DATABASE IF NOT EXISTS bio_db;

USE bio_db;

-- Table for Genes
CREATE TABLE IF NOT EXISTS genes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    gene_type VARCHAR(50)
);

-- Table for Proteins
CREATE TABLE IF NOT EXISTS proteins (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    molecular_weight DECIMAL(10, 2),
	amino_acid_count INT,
    gene_id INT,
    FOREIGN KEY (gene_id) 
        REFERENCES genes(id) 
        ON DELETE CASCADE 
        ON UPDATE CASCADE
);

-- Many-to-Many Table for gene-protein Relationship
CREATE TABLE IF NOT EXISTS gene_protein (
    gene_id INT,
    protein_id INT,
    PRIMARY KEY (gene_id, protein_id),
    FOREIGN KEY (gene_id) 
        REFERENCES genes(id) 
        ON DELETE CASCADE 
        ON UPDATE CASCADE,
    FOREIGN KEY (protein_id) 
        REFERENCES proteins(id) 
        ON DELETE CASCADE 
        ON UPDATE CASCADE
);

-- Table for Pathways
CREATE TABLE IF NOT EXISTS pathways (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    description TEXT
);

-- Many-to-Many Table for Protein-Pathway Relationship
CREATE TABLE IF NOT EXISTS protein_pathway (
    protein_id INT,
    pathway_id INT,
    PRIMARY KEY (protein_id, pathway_id),
    FOREIGN KEY (protein_id) 
        REFERENCES proteins(id) 
        ON DELETE CASCADE 
        ON UPDATE CASCADE,
    FOREIGN KEY (pathway_id) 
        REFERENCES pathways(id) 
        ON DELETE CASCADE 
        ON UPDATE CASCADE
);

-- Table for Users
CREATE TABLE IF NOT EXISTS users (
    username VARCHAR(64) PRIMARY KEY,
    password VARCHAR(64),
    admin BOOLEAN
);

-- Εισαγωγή δεδομένων στον πίνακα Genes
INSERT INTO genes (name, description, gene_type) VALUES 
('BRCA1', 'Breast cancer type 1 susceptibility protein', 'Protein Coding'),
('TP53', 'Tumor protein p53', 'Protein Coding'),
('EGFR', 'Epidermal growth factor receptor', 'Protein Coding'),
('VEGFA', 'Vascular endothelial growth factor A', 'Protein Coding'),
('TNF', 'Tumor necrosis factor', 'Protein Coding'),
('APOE', 'Apolipoprotein E', 'Protein Coding'),
('IL6', 'Interleukin 6', 'Protein Coding'),
('MTHFR', 'Methylenetetrahydrofolate reductase', 'Protein Coding'),
('CFTR', 'Cystic fibrosis transmembrane conductance regulator', 'Protein Coding'),
('ESR1', 'Estrogen receptor 1', 'Protein Coding'),
('MTOR', 'Mechanistic target of rapamycin', 'Protein Coding'),
('JAK2', 'Janus kinase 2', 'Protein Coding'),
('CDH1', 'Cadherin 1', 'Protein Coding'),
('KRAS', 'Kirsten rat sarcoma viral oncogene homolog', 'Protein Coding'),
('PTEN', 'Phosphatase and tensin homolog', 'Protein Coding'),
('TNFRSF1A', 'Tumor necrosis factor receptor', 'Protein Coding'),
('JAK1', 'Janus kinase 1', 'Protein Coding');


-- Εισαγωγή δεδομένων στον πίνακα Proteins
INSERT INTO proteins (name, molecular_weight, amino_acid_count, gene_id) VALUES 
 ('Breast cancer type 1 susceptibility protein', 220.3, 1863, 1),
 ('Tumor protein p53', 43.7, 393, 2),
 ('Epidermal growth factor receptor', 134.2, 1210, 3),
 ('Vascular endothelial growth factor A', 45.0, 232, 4),
 ('Tumor necrosis factor', 26.0, 233, 5),
 ('Apolipoprotein E', 36.2, 317, 6),
 ('Interleukin 6', 23.7, 212, 7),
 ('Methylenetetrahydrofolate reductase', 77.0, 656, 8),
 ('Cystic fibrosis transmembrane conductance regulator', 168.2, 1480, 9),
 ('Estrogen receptor 1', 66.2, 595, 10),
 ('Mechanistic target of rapamycin', 289.2, 2549, 11),
 ('Janus kinase 2', 140.2, 1132, 12),
 ('Cadherin 1', 97.6, 882, 13),
 ('Kirsten rat sarcoma viral oncogene homolog', 21.6, 189, 14),
 ('Phosphatase and tensin homolog', 47.2, 403, 15),
 ('Breast cancer type 2 susceptibility protein', 384.6, 3418, 16),
 ('DNA repair protein RAD51 homolog 1', 37.7, 339, 17);


-- Σχέσεις Γονιδίων-Πρωτεϊνών
INSERT INTO gene_protein (gene_id, protein_id) VALUES 
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9),
(10, 10),
(11, 11),
(12, 12),
(13, 13),
(14, 14),
(15, 15),
(16, 5),  
(17, 7),
(1,16),
(1,17);


-- Εισαγωγή δεδομένων στον πίνακα Pathways
INSERT INTO pathways (name, description) VALUES 
('Glycolysis', 'Metabolic pathway that converts glucose into pyruvate'),
('Citric Acid Cycle', 'Series of chemical reactions used by all aerobic organisms to generate energy'),
('Oxidative Phosphorylation', 'Metabolic pathway that uses energy released by the oxidation of nutrients to produce ATP'),
('Pentose Phosphate Pathway', 'Metabolic pathway parallel to glycolysis that generates NADPH and pentoses'),
('Fatty Acid Synthesis', 'Creation of fatty acids from acetyl-CoA and NADPH through action of enzymes'),
('Fatty Acid Beta-Oxidation', 'Catabolic process by which fatty acid molecules are broken down in the cytosol in prokaryotes and in the mitochondria in eukaryotes to generate acetyl-CoA'),
('Urea Cycle', 'Cycle of biochemical reactions that produce urea from ammonia'),
('Gluconeogenesis', 'Metabolic pathway that results in the generation of glucose from certain non-carbohydrate carbon substrates'),
('Cholesterol Synthesis', 'Process by which cells synthesize cholesterol'),
('Heme Synthesis', 'Process by which heme is produced'),
('Steroidogenesis', 'Biological process by which steroids are generated from cholesterol and transformed into other steroids'),
('Apoptosis', 'Process of programmed cell death'),
('Cell Cycle', 'Series of events that take place in a cell leading to its division and duplication'),
('DNA Repair', 'Processes by which a cell identifies and corrects damage to DNA molecules that encode its genome'),
('RNA Splicing', 'Process by which introns are removed from pre-mRNA and exons are joined together');

-- Σχέσεις Πρωτεϊνών-Μεταβολικών Οδών
INSERT INTO protein_pathway (protein_id, pathway_id) VALUES 
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9),
(10, 10),
(11, 11),
(12, 12),
(13, 13),
(14, 14),
(15, 15),
(1,5),
(1,13),
(1,14),
(2,4),
(3,1),
(3,12),
(4,3),
(10,9);

-- Insert initial data
INSERT INTO users (username, password, admin) VALUES
('User1', 'user1', FALSE),
('User2', 'user2', FALSE),
('User3', 'user3', FALSE),
('User4', 'user4', FALSE),
('User5', 'user5', FALSE),
('admin', 'admin', TRUE);